## DNSServer

代码使用 python3.8版本开发
支持以下功能：

1. 配置ip允许/禁止访问此服务器
   1. 支持配置ip范围
   2. 会使用正则对输入的值进行校验
2. 配置上级dns服务器
3. 配置指定域名返回空值(支持正则)
4. 配置指定域名不允许访问(支持正则)
5. 配置域名直接返回指定ip(支持正则)
6. 对域名解析后的ip进行缓存，会定期(可自行配置时间)清除过期的缓存
   1. 支持配置缓存有效时间
   2. 如果在取缓存时遇到缓存过期则将缓存中的值返回, 然后清除该缓存
7. 可一键修改服务器的dns配置(需要以管理员身份运行)
8. 可一键刷新固定域名与ip的映射
9. 支持日志(使用另外的线程池)
   1. 可在前端配置页面上筛选、过滤日志
   2. 支持日志按年、月、日、时、分、秒保存
   3. 支持对接远程 elk 需要在 config.json(前端页面上也可进行配置) 中的 elk 配置 enable 修改为true开启 配置 host 和 port 然后重启 dns
10. 支持对配置的dns服务器进行测试
11. 支持服务端管理配置 可在 config.json 中配置服务端ip和端口以及是否开启 开启后可定时向服务端拉取配置(可根据不同 ip 配置不同的可拉取项)
12. 支持危险域名统计且危险域名的日志会输出到另外的目录中
13. 修改了 dns 的逻辑 如果域名在所有配置项中都没有匹配成功 则被当做危险域名处理并打印日志
14. 在网页配置端中可快速添加日志中的域名到 危险域名/白名单域名/固定ip的域名 三个配置项中
15. 可以在客户端连接服务端之后直接通过服务端去查看/修改各个客户端的配置
16. 支持 nginx 转发 dns 请求并获取客户端真实 IP(需要开启 proxy_protocol on)
17. 支持指定 dns 解析使用的端口
18. 支持为配置页面开启认证
    1. 需要在 config.json 中配置用户名和密码
    2. 支持设置用户名密码
    3. 支持配置管理端ip
    4. 用户名或密码错误时需要等待时间(可以配置等待时间的底数每次错误等待时间会以底数**错误数的形式增加)
19. 遇到不在缓存的域名时为了提高吞吐量会做以下操作
    1. 在字典中为该域名设置一个标识
    2. 交给另外的线程池进行向上级 dns 服务进行解析(当前请求不返回值), 
    3. 在该域名解析过程中还有请求解析此域名的不会交给另外的线程池解析而是直接不返回
20. 支持一键打包(包括前端文件)
    1. dns端运行 installer.py(需要将配置文件一并复制过去)
    2. server端运行 server/install.py(需要将配置文件一并复制过去)

需要向项目目录下放置 server.crt 和 server.key 证书 或者 在代码中去掉 ssl_context=('server.crt', 'server.key')
使用 vue + elementUI 网页来作为配置
运行后浏览器打开 https://127.0.0.1:5000 就可以配置了

服务端的地址默认为 https://127.0.0.1:5001
